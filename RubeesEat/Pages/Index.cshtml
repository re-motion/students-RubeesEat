@page
@using System.Globalization
@inject IBillRepository billRepository
@inject IPersonRepository personRepository

<h1>Hello, @personRepository.GetCurrentUser().FirstName!</h1>

@{
    var amount = billRepository.GetBalance(personRepository.GetCurrentUser());
    var isPositive = amount >= 0;
    var sign = isPositive ? "+" : "-";
    var amountAsString = sign + " " + amount.ToString("C", CultureInfo.CreateSpecificCulture("de-DE"));
    var displayClass = isPositive ? "positive-balance" : "negative-balance";
}

<div id="balance" class="@displayClass">@amountAsString</div>

<ul class="entryLines">
    @foreach (var item in billRepository.GetRecentBalanceChanges(personRepository.GetCurrentUser(), 10))
    {
        <li>
            <a class="clickBillDetails" href="BillDetails/@item.BillId">
                <div class="amount-description">
                    <span class="amount @(item.Amount < 0 ? "negative-amount" : "positive-amount")">
                        @item.Amountâ‚¬
                    </span>
                    <span class="descriptionHomepage">
                        @item.Description
                    </span>
                </div>
                <div class="dateHomepage">
                    @item.Date.ToString("D", CultureInfo.CreateSpecificCulture("en-US"))
                </div>
            </a>
        </li>
    }
</ul>
